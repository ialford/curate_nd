<% solr_doc          ||= document.inner_object.solr_doc                                                    %>
<% title_link_target ||= common_object_path(document) %>
<% if document.respond_to?(:name) %>
  <% title_link_text   ||= document.name %>
<% else %>
  <% title_link_text   ||= document.title %>
<% end %>
<% edit_path         ||= edit_polymorphic_path([:curation_concern, document])                              %>
<div class="row-fluid identifier-and-action">
  <div class="span2 list-number">
    <%= document_counter_with_offset(counter) if defined?(counter) %>
    <%= render :partial => 'catalog/_index_partials/type_display', locals: {document: document} %>
  </div>

  <div class="span7 search-result-link">
    <%# Minimize Fedora hits by using solr_doc rather than document %>
    <%= link_to richly_formatted_text(title_link_text), title_link_target, :id => "src_copy_link_#{solr_doc.noid}" %>
  </div>

  <div class="span3 search-result-actions">
    <% if current_user -%>
      <% if can?( :edit, document ) && edit_path.present? %>
      <%= link_to(
        raw('<i class="icon-pencil icon-large"></i>'),
          edit_path,
          class: 'itemicon itemedit btn',
          title: "Edit Metadata"
        )%>
      <% end %>
    <% end %>
  </div>
</div>
